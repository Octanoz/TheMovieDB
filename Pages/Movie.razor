@page "/movie/{id:int}"
@inject TMDBClient TMDB

@if (movieDetails is null)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}
else
{
    <PageTitle>@movieDetails.Title</PageTitle>

    <MudImage Fluid="true" Src="@($"https://image.tmdb.org/t/p/original{movieDetails.BackdropPath}")" Alt="@($"{movieDetails.Title} backdrop")" Class="backdrop-image" Style="filter: grayscale(75%)" />
    <MudCard Elevation="3" Width="300px" Class="absolute z-10" Style="inset: 300px 0 0 300px;">
        <MudCardMedia Image="@($"https://image.tmdb.org/t/p/w300{movieDetails.PosterPath}")" Height="500" Alt="" />
    </MudCard>
    <MudText Typo="Typo.h2">@movieDetails.Title</MudText>
    <p>@movieDetails.Overview</p>
}

@code {
    [Parameter]
    public int Id { get; set; }

    private MovieDetails? movieDetails;

    protected override async Task OnInitializedAsync()
    {
        movieDetails = await TMDB.GetMovieDetailsAsync(Id);
    }
}
